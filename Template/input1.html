<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bail Eligibility Checker</title>
    <style>
          body {
            font-family: Arial, sans-serif;
        }

        .form-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }


        h1 {
            text-align: center;
        }

        form {
            max-width: 500px;
            margin: 0 auto;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        input[type="submit"] {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        input[type="submit"]:hover {
            background-color: #0056b3;
        }


        #result {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Bail Eligibility Checker</h1>

    <!-- Input Form -->
    <div class="form-container">
        <form method="POST" action="/check_eligibility" id="eligibilityForm">

            <label for="name">Name of the accused:</label>
            <input type="text" name="name" required> <br><br>


            <label for="gender">Genders:</label>
            <select name="gender" required>
                <option value="">Select an option</option>
                <option value="Male">Man</option>
                <option value="Female">Woman</option>
                <option value="transgender">Transgender</option>
                <option value="transgender man">Transgender Man</option>
                <option value="transgender woman">Transgender Woman</option>
            </select> <br><br>


            <label id="age">Age:</label>
            <select name="age" required>
                <option value="">Select an age</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
                <option value="51">51</option>
                <option value="52">52</option>
                <option value="53">53</option>
                <option value="54">54</option>
                <option value="55">55</option>
                <option value="56">56</option>
                <option value="57">57</option>
                <option value="58">58</option>
                <option value="59">59</option>
                <option value="60">60</option>
                <option value="61">61</option>
                <option value="62">62</option>
                <option value="63">63</option>
                <option value="64">64</option>
                <option value="65">65</option>
                <option value="66">66</option>
                <option value="67">67</option>
                <option value="68">68</option>
                <option value="69">69</option>
                <option value="70">70</option>
                <option value="71">71</option>
                <option value="72">72</option>
                <option value="73">73</option>
                <option value="74">74</option>
                <option value="75">75</option>
                <option value="76">76</option>
                <option value="77">77</option>
                <option value="78">78</option>
                <option value="79">79</option>
                <option value="80">80</option>
                <option value="81">81</option>
                <option value="82">82</option>
                <option value="83">83</option>
                <option value="84">84</option>
                <option value="85">85</option>
                <option value="86">86</option>
                <option value="87">87</option>
                <option value="88">88</option>
                <option value="89">89</option>
                <option value="90">90</option>
                <option value="91">91</option>
                <option value="92">92</option>
                <option value="93">93</option>
                <option value="94">94</option>
                <option value="95">95</option>
                <option value="96">96</option>
                <option value="97">97</option>
                <option value="98">98</option>
                <option value="99">99</option>
                <option value="100">100</option>
            </select>
            <br><br>

            <label for="act">Act:</label>
            <select name="act" required>
                <option value="">Select an option</option>
                <option value="Gujarat Prohibition Act">Gujarat Prohibition Act</option>
                <option value="IPC">IPC</option>
                <option value="NDPS">NDPS</option>
                <option value="POCSO">POCSO</option>
            </select><br><br>


            <label for="section">Section:</label>
            <input type="text" name="section" id="sectionInput" required>
            <br><br>

            <label for="bailable">Bailable:</label>
            <input type="text" name="bailable" id="bailableInput" required><br><br>

            <label for="compoundable">Compoundable (Yes/No):</label>
            <input type="text" name="compoundable" id="compoundableInput" required>  <br><br>

            <label for="max_punishment">Max Punishment (in Years):</label>
            <input type="text" name="max_punishment" id="maxPunishmentInput" required>  <br><br>

            <label for="magistrate_trial">Is the case triable by Magistrate (Yes/No):</label>
            <input type="text" name="magistrate_trial" id="magistrateTrialInput" required>  <br><br>

            <label for="probation_act" title="104A. Bombay Probation of Offenders Act, 1938, and [Section 360 of the Code of Criminal Procedure, 1973 (2 of 1974)], not to apply to persons convicted of offence under this Act. - Nothing in the Bombay Probation of Offenders Act, 1938 (Bombay XIX of 1938), or [in any law corresponding to that Act in force in any part of the State or in the Probation of Offenders Act, 1958, (XX of 1958), where that Act is brought into force in any part of the State or in] section 562 of the [Code of Criminal Procedure, 1898 (V of 1898)], shall apply to any person convicted of any offence under this Act]">
                Is it covered under Sec 3 Probation of Offenders Act namely accused of offence under Sections 379, 380, 381, 404, 420 IPC?
            </label>
            <select name="probation_act" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>
            <br><br>

             <label for="detained_under_crpc" title="Section 107: Security for keeping the peace.

Section 108: Security for good behavior from persons disseminating seditious matters.

Section 109: Security for good behavior from suspected persons.

Section 151: Arrest to prevent the commission of cognizable offenses."> UTPs detained u/s 107,108,109,151 of CrPC?</label>
            <select name="detained_under_crpc" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>
            <br><br>

            <label for="sentence_status">Have undergone sentence or entitled to release due to remission?</label>
            <select name="sentence_status" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select> <br><br>

            <label for="date_sent_to_jail">Date Sent To Jail:</label>
            <input type="date" name="date_sent_to_jail" required><br><br><br>

            <label for="bail_received">Whether bail received from court?</label>
            <select name="bail_received" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select> <br><br>

            <label for="surety_furnished">Whether surety furnished?</label>
            <select name="surety_furnished" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>  <br><br>

            <label for="chargesheet_filed">Is chargesheet filed?</label>
            <select name="chargesheet_filed" required onchange="toggleEvidenceDateField(this)">
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select> <br><br>

            <label for="first_date_fixed_for_evidence" id="evidenceDateLabel" style="display: none;">First date fixed for evidence:</label>
            <input type="date" name="first_date_fixed_for_evidence" id="evidenceDateField" style="display: none;"><br><br><br>

             <label for="first_time_offender">Is the accused a first-time offender?</label>
            <select name="first_time_offender" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>  <br><br>

            <label for="sick_or_infirm">Is the accused sick or infirm and requires special treatment?</label>
            <select name="sick_or_infirm" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>  <br><br>

            <label for="unsound_mind">Is the accused a person of unsound mind?</label>
            <select name="unsound_mind" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>  <br><br>

             <label for="trial_concluded">Is the trial concluded?</label>
            <select name="trial_concluded" required>
                <option value="">Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select> <br><br>

            <input type="submit" value="Check Eligibility">
        </form>
    </div>


    <!-- Result will be displayed here -->
    <div id="result"></div>

<script>


     // JavaScript code to fetch section attributes when section is entered
    const sectionInput = document.getElementById("sectionInput");
    sectionInput.addEventListener("blur", function () {
        // Fetch section attributes when the section input field loses focus (i.e., on blur event)
        const section = sectionInput.value.trim(); // Trim leading/trailing spaces
        const act = document.querySelector("select[name='act']").value;

        fetch(`/fetch_section_attributes?act=${act}&section=${section}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok.');
                }
                return response.json();
            })
            .then(data => {
                document.getElementById("bailableInput").value = data.bailable || "yes";
                document.getElementById("maxPunishmentInput").value = data.max_punishment || 0;
                document.getElementById("compoundableInput").value = data.compoundable || "yes";
                document.getElementById("magistrateTrialInput").value = data.magistrate_trial || "yes";
            })
            .catch(error => {
                console.error('Error fetching section attributes:', error);
                // Reset input fields or show error message if needed
            });
    });


    // JavaScript code to automatically fill probation_act based on the entered act
    const actInput = document.querySelector("select[name='act']");

    actInput.addEventListener("input", function() {
        const enteredAct = actInput.value.toLowerCase();
        const probationActField = document.querySelector("select[name='probation_act']");

        if (enteredAct.includes("gujarat prohibition act")) {
            probationActField.value = "No";
        } else {
            probationActField.value = "";
        }
    });

    // Function to toggle evidence date field visibility
    function toggleEvidenceDateField(selectElement) {
        const evidenceDateLabel = document.getElementById('evidenceDateLabel');
        const evidenceDateField = document.getElementById('evidenceDateField');

        if (selectElement.value === 'Yes') {
            evidenceDateLabel.style.display = 'block';
            evidenceDateField.style.display = 'block';
            evidenceDateField.required = true;
        } else {
            evidenceDateLabel.style.display = 'none';
            evidenceDateField.style.display = 'none';
            evidenceDateField.required = false;
        }
    }

     // JavaScript code to fetch and display the result
    document.getElementById("eligibilityForm").addEventListener('submit', function(e) {
        e.preventDefault();
        fetch('/check_eligibility', {
            method: 'POST',
            body: new FormData(this),
        })
        .then(response => response.text())
        .then(result => {
            document.getElementById('result').innerHTML = result;
        });
    });




</script>

</body>
</html>
